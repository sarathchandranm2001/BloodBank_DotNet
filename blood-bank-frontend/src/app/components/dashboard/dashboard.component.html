<mat-toolbar color="primary">
  <span>Blood Bank Management System</span>
  <span class="spacer"></span>
  <span *ngIf="currentUser">Welcome, {{ currentUser.name }} ({{ getUserRoleName() }})</span>
  <button mat-icon-button (click)="logout()">
    <mat-icon>logout</mat-icon>
  </button>
</mat-toolbar>

<div class="dashboard-container">
  <div class="welcome-section">
    <h1>Welcome to Blood Bank Management System</h1>
    <p *ngIf="currentUser">Hello {{ currentUser.name }}, you are logged in as {{ getUserRoleName() }}</p>
  </div>

  <div class="dashboard-cards">
    <!-- Admin Features -->
    <mat-card *ngIf="currentUser?.role === UserRole.Admin" class="feature-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>admin_panel_settings</mat-icon>
          Administration
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>Manage users, donors, recipients, and blood inventory</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="navigateTo('/admin/dashboard')">Admin Dashboard</button>
        <button mat-raised-button color="accent" (click)="navigateTo('/admin/reports')">View Reports</button>
      </mat-card-actions>
    </mat-card>

    <!-- Donor Management (Admin/Staff) -->
    <mat-card *ngIf="currentUser?.role === UserRole.Admin" class="feature-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>people</mat-icon>
          Donor Management
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>Register donors, track donations, check eligibility, manage donor records</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="navigateTo('/admin/users')">View All Donors</button>
        <button mat-raised-button color="accent" (click)="navigateTo('/donors')">Register Donor</button>
      </mat-card-actions>
    </mat-card>

    <!-- Donor Features -->
    <mat-card *ngIf="currentUser?.role === UserRole.Donor || currentUser?.role === UserRole.Admin" class="feature-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>volunteer_activism</mat-icon>
          Donor Services
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>Manage donor profile, view donation history, check eligibility</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="navigateTo('/donors')">My Profile</button>
        <button mat-raised-button color="accent" (click)="navigateTo('/donors')">Donation History</button>
      </mat-card-actions>
    </mat-card>

    <!-- Recipient Features -->
    <mat-card *ngIf="currentUser?.role === UserRole.Recipient || currentUser?.role === UserRole.Admin" class="feature-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>local_hospital</mat-icon>
          Recipient Services
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>Request blood, view request status, manage recipient profile</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="navigateTo('/recipient')">Blood Requests</button>
        <button mat-raised-button color="accent" (click)="navigateTo('/recipient')">My Profile</button>
      </mat-card-actions>
    </mat-card>

    <!-- Blood Inventory -->
    <mat-card *ngIf="currentUser?.role === UserRole.Admin" class="feature-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>inventory</mat-icon>
          Blood Inventory
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>Monitor blood stock levels, manage inventory, track expiry</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="navigateTo('/admin/inventory')">View Inventory</button>
        <button mat-raised-button color="warn" (click)="navigateTo('/admin/inventory')">Low Stock Alerts</button>
      </mat-card-actions>
    </mat-card>

    <!-- Blood Stock Management -->
    <mat-card *ngIf="currentUser?.role === UserRole.Admin" class="feature-card">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>science</mat-icon>
          Blood Stock Management
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>Individual blood unit tracking, FIFO issuing, expiry management</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="navigateTo('/admin/inventory')">Manage Stock</button>
        <button mat-raised-button color="accent" (click)="navigateTo('/admin/inventory')">Issue Blood</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
